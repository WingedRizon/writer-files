summonBook:
 Conditions:
 - incombat{} true
 - mobsinchunk{a=<15} true
 - stance normal
 Skills:
 - summon{type=LivingBook;amount=1;yr=0;os=true;radius=3} @PlayersInRadius{r=25;limit=1;sort=FURTHEST}

chooseSkill_sunkenNormal:
 Conditions:
 - incombat{} true
 - stance normal
 Skills:
 - randomskill{skills=startHappyEnding,startPlotTwist} @self
 
summonBossBook:
 Conditions:
 - incombat{} true
 - mobsinchunk{a=<15} true
 - stance normal
 Skills:
 - summon{type=LivingBook;amount=3;yr=0;os=true;radius=4} @Target

doubleDamage:
 Conditions:
 - stance doubleDamage
 Skills:
 - damage{a=15} @target

startHappyEnding:
 Conditions:
 - incombat{} true
 Skills:
 - setstance{stance=queue}
 - sendtitle{title="&4&kooo&r&l&cHappy Ending&r&4&kooo";subtitle="&e&l5";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cHappy Ending&r&4&kooo";subtitle="&e&l4";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cHappy Ending&r&4&kooo";subtitle="&e&l3";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cHappy Ending&r&4&kooo";subtitle="&e&l2";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cHappy Ending&r&4&kooo";subtitle="&e&l1";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - skill{s=happyEnding}

happyEnding:
 Skills:
 - setstance{stance=normal}
 - signal{s=happyEnding} @MIR{r=50;t=LivingBook}
 - effect:particles{particle=reddust;color=#FFF385;amount=6;hS=.5;vS=1;speed=1} @MIR{r=50;t=LivingBook}
 - effect:sound{s=block.fire.extinguish;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}

happyEndingSignal:
 Skills:
 - heal{amount=35} @Parent
 - damage{a=0} @Parent
 - effect:sound{s=entity.player.levelup;v=0.1;p=1.0} @Parent
 - effect:particles{p=HAPPY_VILLAGER;amount=25;vSpread=1;hSpread=1;Speed=0.00000001;yOffset=0} @Parent >0 1
 - delay 1
 - suicide

startPlotTwist:
 Conditions:
 - incombat{} true
 Skills:
 - setstance{stance=queue}
 - sendtitle{title="&4&kooo&r&l&cPlot Twist&r&4&kooo";subtitle="&e&l5";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cPlot Twist&r&4&kooo";subtitle="&e&l4";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cPlot Twist&r&4&kooo";subtitle="&e&l3";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cPlot Twist&r&4&kooo";subtitle="&e&l2";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cPlot Twist&r&4&kooo";subtitle="&e&l1";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - skill{s=plotTwist}

plotTwist:
 Skills:
 - setstance{stance=normal}
 - signal{s=plotTwist} @MIR{r=50;t=LivingBook}
 - effect:particles{particle=reddust;color=#000000;amount=6;hS=.5;vS=1;speed=1} @MIR{r=50;t=LivingBook}
 - effect:sound{s=block.fire.extinguish;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - message{m="&r&7The ability wears off in<&co> 10"} @PIR{r=50}
 - delay 100
 - message{m="&r&75"} @PIR{r=50}
 - delay 20
 - message{m="&r&74"} @PIR{r=50}
 - delay 20
 - message{m="&r&73"} @PIR{r=50}
 - delay 20
 - message{m="&r&72"} @PIR{r=50}
 - delay 20
 - message{m="&r&71"} @PIR{r=50}
 - delay 20
 - signal{s=normal} @MIR{r=50;t=LivingBook}

plotTwistAffect:
 Conditions:
 - incombat{} true
 - stance plotTwist
 Skills:
 - potion{t=BLINDNESS;d=100;l=99;hasParticles=true;force=true} @target

lavaPoolPassive:
 Conditions:
 - stance flame
 Skills:
 - signal{s=lavaPool} @MIR{r=85;t=flamePool1,flamePool2,flamePool3,flamePool4,flamePool5,flamePool6,flamePool7,flamePool8,flamePool9,flamePool10}

libHeal:
 Skills:
 - effect:particles{p=HAPPY_VILLAGER;amount=10;vSpread=1;hSpread=.5;Speed=0;yOffset=0} @self
 - effect:sound{s=entity.experience_orb.pickup;volume=1.0;pitch=0.5} @PlayersInRadius{r=80}
 - heal{amount=8} @self
 - damage{a=0} @self

lavaPoolSpawn:
 Skills:
 - summon{type=flamePool1;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool2;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool3;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool4;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool5;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool6;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool7;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool8;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool9;amount=1;yr=0;os=true;radius=0} @self
 - summon{type=flamePool10;amount=1;yr=0;os=true;radius=0} @self

removePools:
 Skills:
 - remove @MIR{r=85;t=flamePool1,flamePool2,flamePool3,flamePool4,flamePool5,flamePool6,flamePool7,flamePool8,flamePool9,flamePool10}

lavaPoolPassiveAffect:
 Skills:
 - effect:particlering{particle=flame;radius=3;points=32;amount=1;hS=1;vS=0} @self
 - effect:particlering{particle=flame;radius=3.1;points=32;amount=1;hS=1;vS=0} @self
 - effect:particlering{particle=flame;radius=2.9;points=32;amount=1;hS=1;vS=0} @self
 - damage{a=22} @PIR{r=3}
 - ignite{ticks=80} @PIR{r=3}
 - signal{s=heal} @MIR{r=3;t=TheLibrarian}

chooseSkill_sunkenFlame:
 Conditions:
 - incombat{} true
 - stance flame
 Skills:
 - randomskill{skills=startflameAura,startcombustion} @self

flameEffect:
 Conditions:
 - stance flame
 Skills:
 - effect:particles{particle=flame;amount=12;hS=.5;vS=1;speed=0} @self

startcombustion:
 Conditions:
 - incombat{} true
 Skills:
 - sendtitle{title="&4&kooo&r&l&cCombustion&r&4&kooo";subtitle="&e&l5";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cCombustion&r&4&kooo";subtitle="&e&l4";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cCombustion&r&4&kooo";subtitle="&e&l3";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cCombustion&r&4&kooo";subtitle="&e&l2";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cCombustion&r&4&kooo";subtitle="&e&l1";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - skill{s=combustion}

combustion:
 Skills:
 - damage{a=12} @PIR{r=80}
 - ignite{ticks=20} @PIR{r=80}
 - effect:particles{p=lava;amount=10;speed=1} @PIR{r=80}
 - effect:sound{s=entity.wither.shoot;volume=0.5;pitch=0.5} @PlayersInRadius{r=80}
 - delay 20
 - damage{a=12} @PIR{r=80}
 - ignite{ticks=20} @PIR{r=80}
 - effect:particles{p=lava;amount=10;speed=1} @PIR{r=80}
 - effect:sound{s=entity.wither.shoot;volume=0.5;pitch=0.5} @PlayersInRadius{r=80}
 - delay 20
 - damage{a=12} @PIR{r=80}
 - ignite{ticks=20} @PIR{r=80}
 - effect:particles{p=lava;amount=10;speed=1} @PIR{r=80}
 - effect:sound{s=entity.wither.shoot;volume=0.5;pitch=0.5} @PlayersInRadius{r=80}
 - delay 20
 - damage{a=12} @PIR{r=80}
 - ignite{ticks=20} @PIR{r=80}
 - effect:particles{p=lava;amount=10;speed=1} @PIR{r=80}
 - effect:sound{s=entity.wither.shoot;volume=0.5;pitch=0.5} @PlayersInRadius{r=80}
 - delay 20
 - damage{a=12} @PIR{r=80}
 - ignite{ticks=20} @PIR{r=80}
 - effect:particles{p=lava;amount=10;speed=1} @PIR{r=80}
 - effect:sound{s=entity.wither.shoot;volume=0.5;pitch=0.5} @PlayersInRadius{r=80}

startflameAura:
 Conditions:
 - incombat{} true
 Skills:
 - sendtitle{title="&4&kooo&r&l&cFlame Aura&r&4&kooo";subtitle="&e&l5";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cFlame Aura&r&4&kooo";subtitle="&e&l4";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cFlame Aura&r&4&kooo";subtitle="&e&l3";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cFlame Aura&r&4&kooo";subtitle="&e&l2";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - sendtitle{title="&4&kooo&r&l&cFlame Aura&r&4&kooo";subtitle="&e&l1";d=20} @PlayersInRadius{r=50}
 - effect:sound{s=block.comparator.click;volume=1.0;pitch=0.5} @PlayersInRadius{r=50}
 - delay 20
 - skill{s=flameAura}

flameAura:
 Skills:
 - damage{amount=105;i=true;preventknockback=false} @PlayersInRadius{r=6}
 - effect:particlesphere{particle=flame;amount=100;radius=6} @self
 - ignite{ticks=80} @PIR{r=6}
 - delay 40
 - damage{amount=85;i=true;preventknockback=false} @PlayersInRadius{r=12}
 - effect:particlesphere{particle=flame;amount=200;radius=12} @self
 - ignite{ticks=80} @PIR{r=12}
 - delay 40
 - damage{amount=65;i=true;preventknockback=false} @PlayersInRadius{r=24}
 - effect:particlesphere{particle=flame;amount=400;radius=24} @self
 - ignite{ticks=80} @PIR{r=24}
 - delay 40
 - damage{amount=45;i=true;preventknockback=false} @PlayersInRadius{r=48}
 - effect:particlesphere{particle=flame;amount=800;radius=48} @self
 - ignite{ticks=80} @PIR{r=48}
 - delay 40
 - damage{amount=25;i=true;preventknockback=false} @PlayersInRadius{r=85}
 - effect:particlesphere{particle=flame;amount=1600;radius=85} @self
 - ignite{ticks=80} @PIR{r=85}

#############################################################################################################################
FireAuraSmall:
  Skills:
  - delay 20
  - effect:particlering{p=flame;a=20;vS=0;hS=0;radius=1}
  - sound{s=entity.horse.step} @self
  - delay 10
  - effect:particlering{p=flame;a=20;vS=0;hS=0;radius=2}
  - sound{s=entity.horse.step} @self
  - delay 10
  - effect:particlering{p=flame;a=20;vS=0;hS=0;radius=3}
  - sound{s=entity.horse.step} @self
  - delay 10
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=1}
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=2}
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=3}
  - effect:sound{s=entity.blaze.shoot;v=0.8;p=0.01} @self
  - damage{a=25} @PlayersInRadius{r=3}

MeteorShot:
  Skills:
  - effect:sound{s=entity.firework_rocket.launch;v=0.8;p=0.01} @self
  - effect:particles{p=flame;amount=20;hSpread=1;vSpread=1;speed=0;so=0} @Self
  - projectile{type=METEOR;onTick=MeteorShot-Tick;onEnd=MeteorShot-Hit;onHit=MeteorShot-Hit;v=25;i=1;hR=1;vR=1;mr=100;g=1.5;hfs=20} @RLNTE{amount=1;radius=2;spacing=5;minradius=0}

MeteorShot3:
  Skills:
  - effect:sound{s=entity.firework_rocket.launch;v=0.8;p=0.01} @self
  - effect:particles{p=flame;amount=20;hSpread=1;vSpread=1;speed=0;so=0} @Self
  - projectile{type=METEOR;onTick=MeteorShot-Tick;onEnd=MeteorShot-Hit;onHit=MeteorShot-Hit;v=25;i=1;hR=1;vR=1;mr=100;g=1.5;hfs=20} @RLNTE{amount=3;radius=5;spacing=5;minradius=0}

MeteorShot-Tick:
  Skills:
  - effect:particles{p=flame;amount=5;speed=0.00001;hS=0.1;vS=0.5} @origin

MeteorShot-Hit:
  Skills:
  - damage{a=35} @PlayersNearOrigin{r=2}
  - effect:sound{s=entity.generic.explode;v=0.2;p=0}
  - effect:particles{p=lava;amount=15;speed=0.2;hS=0.1;vS=1} @origin
  
FireAura:
  Skills:
  - delay 40
  - effect:particlering{p=flame;a=10;vS=0;hS=0;radius=1}
  - sound{s=entity.horse.step} @self
  - delay 20
  - effect:particlering{p=flame;a=10;vS=0;hS=0;radius=3}
  - sound{s=entity.horse.step} @self
  - delay 20
  - effect:particlering{p=flame;a=10;vS=0;hS=0;radius=5}
  - sound{s=entity.horse.step} @self
  - delay 20
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=1}
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=3}
  - effect:particlering{p=flame;a=100;vs=0.5;hs=0.5;s=0;y=0;points=20;radius=5}
  - effect:sound{s=entity.blaze.shoot;v=0.8;p=0.01} @self
  - damage{a=25} @PlayersInRadius{r=3}